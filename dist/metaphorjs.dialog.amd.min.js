define("metaphorjs-dialog","metaphorjs-observable metaphorjs-promise metaphorjs-ajax metaphorjs-select metaphorjs-animate metaphorjs-namespace metaphorjs-class".split(" "),function(la,U,wa,u,ea,G,D){function v(a){return"function"==typeof a}function w(a){return"string"==typeof a||a===""+a}function Q(a){return"object"===typeof a&&5===V(a)}function ma(a){if(null===a||"object"!=typeof a)return!1;a=V(a);return 2<a||-1==a}function R(a){return"object"==typeof a&&3===V(a)&&!a.nodeType&&a.constructor===Object}
function W(a){return!0===a||!1===a}function M(){}function na(a,b){return b?oa("(?:^|\\s)"+b+"(?!\\S)").test(a.className):!1}function J(a,b){b&&!na(a,b)&&(a.className+=" "+b)}function fa(a,b){b&&(a.className=a.className.replace(oa("(?:^|\\s)"+b+"(?!\\S)"),""))}function C(a,b,c){if(a&&a.style){var e=a.style,h;"string"===typeof b?(a={},a[b]=c):a=b;for(h in a)e[h]=a[h]}}function E(a,b){return a.getAttribute?a.getAttribute(b):null}function X(){return!1}function Y(){return!0}function x(a){return new S(a)}
function r(a,b,c,e){return setTimeout(function(){a.apply(b,c||[])},e||0)}function pa(a,b){if(!a||!w(a))return null;try{var c=new DOMParser;var e=c.parseFromString(a,b||"text/xml")}catch(h){e=void 0}if(!e||e.getElementsByTagName("parsererror").length)throw"Invalid XML: "+a;return e}function H(a){return a.substr(0,1).toUpperCase()+a.substr(1)}function xa(a,b,c,e){var h=b+"-"+c,f=function(a){a=x(a);for(var d=a.target;d;){if(ha(d,b))return e(a);d=d.parentNode}return null};Z[h]||(Z[h]=[]);Z[h].push({el:a,
ls:f,fn:e});A(a,c,f)}function ya(a,b,c,e){var h,f;if(f=Z[b+"-"+c])for(b=-1,h=f.length;++b<h;)f[b].el===a&&f[b].fn===e&&F(a,c,f[b].ls)}function K(a){var b={top:0,left:0},c=window.document.documentElement;if(!za(a)||a===window)return b;a.getBoundingClientRect&&(b=a.getBoundingClientRect());return{top:b.top+ia()-c.clientTop,left:b.left+ja()-c.clientLeft}}var qa=ea.stop;"use strict";var Aa=Object.prototype.toString,V=function(){var a={"[object String]":0,"[object Number]":1,"[object Boolean]":2,"[object Object]":3,
"[object Function]":4,"[object Array]":5,"[object RegExp]":9,"[object Date]":10};return function(b){if(!b){if(null===b)return 6;if(void 0===b)return 7}var c=a[Aa.call(b)];return void 0===c?-1:1===c&&isNaN(b)?8:c}}();(function(){var a,b=function(b){var c={},h=[];0==arguments.length&&(b=!0);return{addFinder:function(a,d,b){h[b?"unshift":"push"]({fn:a,context:d})},add:function(a,d,g){if(c[a]&&!1===c[a].rewritable)return c[a];c[a]={rewritable:"undefined"!=typeof g?g:b,value:d};return d},get:function(a){if(c[a])return c[a].value;
if(h.length){var d;var b=0;for(d=h.length;b<d;b++){var e=h[b].fn.call(h[b].context,a,this);if(void 0!==e)return this.add(a,e,!0)}}},remove:function(a){var d=c[a];d&&!0===d.rewritable&&delete c[a];return d?d.value:void 0},exists:function(a){return!!c[a]},eachEntry:function(a,d){for(var b in c)a.call(d,c[b].value,b)},destroy:function(){this===a&&(a=null);this.remove=this.exists=this.destroy=this.get=this.add=b=c=null}}};b.global=function(){a||(a=new b(!0));return a};return b})();var N=Array.prototype.slice,
y=function(){return function b(){var c=!1,e=!1,h=N.call(arguments),f=h.shift(),d,g,k;W(h[h.length-1])&&(c=h.pop());W(h[h.length-1])&&(e=c,c=h.pop());for(;h.length;)if((d=h.shift())&&d.hasOwnProperty)for(g in d)if(d.hasOwnProperty(g)&&void 0!==(k=d[g]))if(e)if(f[g]&&R(f[g])&&R(k))b(f[g],k,c,e);else{if(!0===c||void 0==f[g])R(k)?(f[g]={},b(f[g],k,c,!0)):f[g]=k}else if(!0===c||void 0==f[g])f[g]=k;return f}}(),aa={};G=new G(aa,"MetaphorJs");D=new D(G);var t=D.define,O=D.factory,T=function(){var a=["0",
"0","0"];return function(){for(var b=a.length,c;b;){b--;c=a[b].charCodeAt(0);if(57==c)return a[b]="A",a.join("");if(90==c)a[b]="0";else return a[b]=String.fromCharCode(c+1),a.join("")}a.unshift("0");return a.join("")}}(),n=Function.prototype.bind?function(a,b){return a.bind(b)}:function(a,b){return function(){return a.apply(b,arguments)}},oa=function(){var a={};return function(b){return a[b]||(a[b]=new RegExp(b))}}(),P=function(){var a={};return function(b,c,e){b=b._mjsid||(b._mjsid=T());var h=a[b];
return void 0!==e?(h||(h=a[b]={}),h[c]=e):h?h[c]:void 0}}(),S=function(a){if(a instanceof S)return a;if(!(this instanceof S))return new S(a);for(var b in a)if(!this[b])try{this[b]=a[b]}catch(h){}this.originalEvent=a;this.type=a.type;!this.target&&a.srcElement&&(this.target=a.srcElement);var c=a.button;if(void 0===this.pageX&&null!==a.clientX){var e=this.target?this.target.ownerDocument||window.document:window.document;b=e.documentElement;e=e.body;this.pageX=a.clientX+(b&&b.scrollLeft||e&&e.scrollLeft||
0)-(b&&b.clientLeft||e&&e.clientLeft||0);this.pageY=a.clientY+(b&&b.scrollTop||e&&e.scrollTop||0)-(b&&b.clientTop||e&&e.clientTop||0)}this.which||void 0===c||(this.which=c&1?1:c&2?3:c&4?2:0);this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?Y:X;this.timeStamp=a&&a.timeStamp||(new Date).getTime()};y(S.prototype,{isDefaultPrevented:X,isPropagationStopped:X,isImmediatePropagationStopped:X,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=
Y;a.returnValue=!1;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Y;a.cancelBubble=!0;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Y;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();this.stopPropagation()}},!0,!1);var ra=function(a){function b(){e=null}var c,e;a=function(a){return function(h){var d=x(h||window.event),g=N.call(arguments,
1),k=0,f=0,l=0,m=0;d.type="mousewheel";"detail"in d&&(f=-1*d.detail);"wheelDelta"in d&&(f=d.wheelDelta);"wheelDeltaY"in d&&(f=d.wheelDeltaY);"wheelDeltaX"in d&&(k=-1*d.wheelDeltaX);"axis"in d&&d.axis===d.HORIZONTAL_AXIS&&(k=-1*f,f=0);var q=0===f?k:f;"deltaY"in d&&(q=f=-1*d.deltaY);"deltaX"in d&&(k=d.deltaX,0===f&&(q=-1*k));if(0!==f||0!==k){var z=Math.max(Math.abs(f),Math.abs(k));if(!e||z<e)e=z,"mousewheel"===d.type&&0===z%120&&(e/=40);"mousewheel"===d.type&&0===z%120&&(q/=40,k/=40,f/=40);q=Math[1<=
q?"floor":"ceil"](q/e);k=Math[1<=k?"floor":"ceil"](k/e);f=Math[1<=f?"floor":"ceil"](f/e);this.getBoundingClientRect&&(z=this.getBoundingClientRect(),l=d.clientX-z.left,m=d.clientY-z.top);d.deltaX=k;d.deltaY=f;d.deltaFactor=e;d.offsetX=l;d.offsetY=m;d.deltaMode=0;g.unshift(d,q,k,f);c&&clearTimeout(c);c=setTimeout(b,200);return a.apply(this,g)}}};a.events=function(){var a=window.document;return"onwheel"in a||9<=a.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"]};return a}(),
A=function(){var a=null,b=null;return function(c,e,h){null===a&&(c.addEventListener?(a="addEventListener",b=""):(a="attachEvent",b="on"));if("mousewheel"==e){h=ra(h);e=ra.events();var f;var d=0;for(f=e.length;d<f;d++)c[a](b+e[d],h,!1)}else c[a](b+e,h,!1);return h}}(),F=function(){var a=null,b=null;return function(c,e,h){null===a&&(c.removeEventListener?(a="removeEventListener",b=""):(a="detachEvent",b="on"));c[a](b+e,h)}}(),ha=u.is,sa=function(){var a=["Moz","Webkit","ms","O","Khtml"],b="animationDelay",
c="animationDuration",e="transitionDelay",h="transitionDuration",f="transform",d=null,g=null,k=!1;return function(){if(!k){var p=window.document.createElement("div"),l=!1,m;if(void 0!==p.style.animationName)l=!0;else{var q=0;for(m=a.length;q<m;q++){var z=a[q];if(void 0!==p.style[z+"AnimationName"]){l=!0;b=z+"AnimationDelay";c=z+"AnimationDuration";e=z+"TransitionDelay";h=z+"TransitionDuration";f=z+"Transform";break}}}l&&("ontransitionend"in window?d="transitionend":"onwebkittransitionend"in window&&
(d="webkitTransitionEnd"));g=l?{animationDelay:b,animationDuration:c,transitionDelay:e,transitionDuration:h,transform:f,transitionend:d}:{};k=!0}return g}}();(function(){var a=function(a){if(!a)return 0;var d=parseFloat(a);-1===a.indexOf("ms")&&(d*=1E3);return d},b=function(d,b,c){var g,e=b.length;for(g=0;g<e;g++){var k=a(b[g])+a(c[g]);d=Math.max(k,d)}return d},c=!1,e=null,h=null,f=null,d=null;return function(a){!1===c&&(e=(c=sa())?c.animationDuration:null,h=c?c.animationDelay:null,f=c?c.transitionDuration:
null,d=c?c.transitionDelay:null);if(!c)return 0;var g=window.getComputedStyle?window.getComputedStyle(a,null):a.style;a=0;var p=(g[e]||"").split(","),l=(g[h]||"").split(","),m=(g[f]||"").split(",");g=(g[d]||"").split(",");a=Math.max(a,b(a,p,l));return a=Math.max(a,b(a,m,g))}})();var ba=function(){var a=[],b=function(b){var c;var h=0;for(c=a.length;h<c;h++)if(!1===a[h][0].call(a[h][1],b))return;h=(b?b.stack:null)||Error().stack;if("undefined"!=typeof console&&console.error)b&&console.error(b),h&&console.error(h);
else throw b;};b.on=function(c,e){b.un(c,e);a.push([c,e])};b.un=function(b,e){var c;var f=0;for(c=a.length;f<c;f++)if(a[f][0]===b&&a[f][1]===e){a.splice(f,1);break}};return b}(),I=function(){if("undefined"!==typeof window){var a=window;var b=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame;var c=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.mozCancelAnimationFrame||a.webkitCancelRequestAnimationFrame;if(b)return function(a,h,f){var d=b(h||f?function(){a.apply(h,
f||[])}:a);return function(){c(d)}}}return function(a,b,c){var d=r(a,b,c,0);return function(){clearTimeout(d)}}}(),ta=function(){return String.prototype.trim?function(a){return w(a)?a.trim():a}:function(a){return w(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}(),Ba=function(){return"undefined"!=typeof JSON?function(a){return JSON.parse(a)}:function(a){return(new Function("return "+a))()}}();y(function(a,b){this.name=a;this.listeners=[];this.map={};this.hash=T();this.uni="$$"+a+"_"+this.hash;
this.suspended=!1;this.lid=0;"object"===typeof b&&null!==b?y(this,b,!0,!1):this.returnResult=b}.prototype,{name:null,listeners:null,map:null,hash:null,uni:null,suspended:!1,lid:null,returnResult:null,autoTrigger:null,lastTrigger:null,triggerFilter:null,filterContext:null,expectPromises:!1,resolvePromises:!1,getName:function(){return this.name},destroy:function(){for(var a in this)this[a]=null},on:function(a,b,c){if(!a)return null;b=b||null;c=c||{};var e=this.uni,h=a||b;if(h[e]&&!c.allowDupes)return null;
var f=++this.lid,d=c.first||!1;h[e]=f;a={fn:a,context:b,uniContext:h,id:f,async:!1,called:0,limit:0,start:1,count:0,append:null,prepend:null};y(a,c,!0,!1);!0===a.async&&(a.async=1);d?this.listeners.unshift(a):this.listeners.push(a);this.map[f]=a;if(this.autoTrigger&&this.lastTrigger&&!this.suspended){var g=this.triggerFilter;this.triggerFilter=function(a){return a.id===f?g?!1!==g(a):!0:!1};this.trigger.apply(this,this.lastTrigger);this.triggerFilter=g}return f},once:function(a,b,c){c=c||{};c.limit=
1;return this.on(a,b,c)},un:function(a,b){var c=-1,e=this.uni,h=this.listeners;a=a==parseInt(a)?parseInt(a):(b||a)[e];if(!a)return!1;b=0;for(var f=h.length;b<f;b++)if(h[b].id===a){c=b;delete h[b].uniContext[e];break}if(-1===c)return!1;h.splice(c,1);delete this.map[a];return!0},hasListener:function(a,b){var c=this.listeners;if(a){b=b||a;a=v(a)?b[this.uni]:parseInt(a);if(!a)return!1;b=0;for(var e=c.length;b<e;b++)if(c[b].id===a)return!0;return!1}return 0<c.length},removeAllListeners:function(){var a=
this.listeners,b=this.uni,c;var e=0;for(c=a.length;e<c;e++)delete a[e].uniContext[b];this.listeners=[];this.map={}},suspend:function(){this.suspended=!0},resume:function(){this.suspended=!1},_prepareArgs:function(a,b){if(a.append||a.prepend)b=N.call(b),a.prepend&&(b=a.prepend.concat(b)),a.append&&(b=b.concat(a.append));return b},trigger:function(){var a=this,b=a.listeners,c=a.returnResult,e=a.triggerFilter,h=a.filterContext,f=a.expectPromises,d=[],g;if(a.suspended)return null;a.autoTrigger&&(a.lastTrigger=
N.call(arguments));if(0===b.length)return null;var k="all"===c||"concat"===c?[]:"merge"===c?{}:null,p,l;for(p="first"===c?[b[0]]:N.call(b);l=p.shift();)if(!(!l||!a.map[l.id]||(b=a._prepareArgs(l,arguments),e&&!1===e.call(h,l,b,a))||l.filter&&!1===l.filter.apply(l.filterContext||l.context,b)||(l.count++,l.count<l.start))){if(l.async&&!f){var m=null;r(l.fn,l.context,b,l.async)}else f?(m=function(d,b,c){return function(g){"pipe"===b&&(c[0]=g,c=a._prepareArgs(d,c));return d.fn.apply(d.context,c)}}(l,
c,N.call(arguments)),m=g?g.then(m):l.fn.apply(l.context,b),m.catch(function(a){console.log(a)})):m=l.fn.apply(l.context,b);l.called++;l.called===l.limit&&a.un(l.id);if("first"===c)return m;if(f)d.push(m),"pipe"===c&&m&&(g=m);else if(null!==c)if("all"===c)k.push(m);else if("concat"===c&&m)k=k.concat(m);else if("merge"===c)y(k,m,!0,!1);else{if("nonempty"===c&&m)return m;if("pipe"===c)k=m,arguments[0]=m;else if("last"===c)k=m;else{if(!1===c&&!1===m)return!1;if(!0===c&&!0===m)return!0}}}return f?(e=U.all(d),
a.resolvePromises&&null!==c&&"all"!==c&&(e=e.then(function(a){var d,b=a.length;for(d=0;d<b;d++){var g=a[d];if("concat"===c&&g)k=k.concat(g);else if("merge"===c)y(k,g,!0,!1);else{if("nonempty"===c&&g)return g;if(!1===c&&!1===g)return!1;if(!0===c&&!0===g)return!0}}return k})),e):k}},!0,!1);var va=function(){function a(b,h,f){var d;if(Q(h)){var g=0;for(d=h.length;g<d;g++){var e=h[g];c.test(b)?f(b,e):a(b+"["+("object"===typeof e?g:"")+"]",e,f)}}else if(R(h))for(g in h)a(b+"["+g+"]",h[g],f);else f(b,h)}
var b=/%20/g,c=/\[\]$/;return function(c){var e,f=[],d=function(a,d){d=v(d)?d():null==d?"":d;f[f.length]=encodeURIComponent(a)+"="+encodeURIComponent(d)};for(e in c)a(e,c[e],d);return f.join("&").replace(b,"+")}}();G.register("mixin.Promise",{$$promise:null,$beforeInit:function(){this.$$promise=new U},then:function(){return this.$$promise.then.apply(this.$$promise,arguments)},done:function(){this.$$promise.done.apply(this.$$promise,arguments);return this},always:function(){this.$$promise.always.apply(this.$$promise,
arguments);return this},fail:function(){this.$$promise.fail.apply(this.$$promise,arguments);return this}});(function(){var a={xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"};return t({$class:"ajax.transport.XHR",type:"xhr",_xhr:null,_deferred:null,_ajax:null,$init:function(a,c,e){var b;window.XMLHttpRequest&&(b=new XMLHttpRequest)||(b=new ActiveXObject("Msxml2.XMLHTTP"));this._xhr=
b;this._deferred=c;this._opt=a;this._ajax=e;a.progress&&(b.onprogress=n(a.progress,a.context));a.uploadProgress&&b.upload&&(b.upload.onprogress=n(a.uploadProgress,a.context));b.onreadystatechange=n(this.onReadyStateChange,this)},setHeaders:function(){var b=this._opt,c=this._xhr,e;if(b.xhrFields)for(e in b.xhrFields)c[e]=b.xhrFields[e];b.data&&b.contentType&&c.setRequestHeader("Content-Type",b.contentType);c.setRequestHeader("X-Requested-With","XMLHttpRequest");c.setRequestHeader("Accept",b.dataType&&
a[b.dataType]?a[b.dataType]+", */*; q=0.01":a._default);for(e in b.headers)c.setRequestHeader(e,b.headers[e])},onReadyStateChange:function(){var a=this._xhr,c=this._deferred;if(0===a.readyState)a.onreadystatechange=M,c.resolve(a);else if(4===a.readyState){a.onreadystatechange=M;a:{try{var e=!a.status&&location&&"file:"==location.protocol||200<=a.status&&300>a.status||304===a.status||1223===a.status;break a}catch(h){}e=!1}if(e)this._ajax.processResponse(w(a.responseText)?a.responseText:void 0,a.getResponseHeader("content-type")||
"");else{a.responseData=null;try{a.responseData=this._ajax.returnResponse(w(a.responseText)?a.responseText:void 0,a.getResponseHeader("content-type")||"")}catch(h){}c.reject(a)}}},abort:function(){this._xhr.onreadystatechange=M;this._xhr.abort()},send:function(){var a=this._opt;try{this._xhr.open(a.method,a.url,!0,a.username,a.password),this.setHeaders(),this._xhr.send(a.data)}catch(c){this._deferred&&this._deferred.reject(c)}}})})();t({$class:"ajax.transport.Script",type:"script",_opt:null,_deferred:null,
_ajax:null,_el:null,$init:function(a,b,c){this._opt=a;this._ajax=c;this._deferred=b},send:function(){var a=document.createElement("script");a.setAttribute("async","async");a.setAttribute("charset","utf-8");a.setAttribute("src",this._opt.url);A(a,"load",n(this.onLoad,this));A(a,"error",n(this.onError,this));document.head.appendChild(a);this._el=a},onLoad:function(a){this._deferred&&this._deferred.resolve(a)},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},
destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)}});t({$class:"ajax.transport.IFrame",type:"iframe",_opt:null,_deferred:null,_ajax:null,_el:null,_sent:!1,$init:function(a,b,c){this._opt=a;this._ajax=c;this._deferred=b},send:function(){var a=this,b=document.createElement("iframe"),c="frame-"+T(),e=a._opt.form;b.setAttribute("id",c);b.setAttribute("name",c);b.style.display="none";document.body.appendChild(b);e.setAttribute("action",a._opt.url);e.setAttribute("target",
c);A(b,"load",n(a.onLoad,a));A(b,"error",n(a.onError,a));a._el=b;var h=0,f=function(){h++;try{e.submit(),a._sent=!0}catch(d){2<h?a._deferred.reject(d):r(f,null,[],1E3)}};f()},onLoad:function(){var a=this._el;if(this._sent&&this._opt&&!this._opt.jsonp)try{var b=a.contentDocument||a.contentWindow.document;var c=b.body.innerHTML;this._ajax.processResponse(c)}catch(e){this._deferred.reject(e)}},onError:function(a){this._sent&&this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},
destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)}});(function(){var a=/\?/,b=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,c=/#.*$/,e=/([?&])_=[^&]*/,h=new la,f=!(!window||!window.FormData),d=function(a,d,b){var c=d?d.dataType:null;d=d?d.selector:null;if(!w(a))return a;b=b||"";if("xml"===c||!c&&0<=b.indexOf("xml"))return a=pa(ta(a)),d?u(d,a):a;if("html"===c)return a=pa(a,"text/html"),d?u(d,a):a;if("fragment"==c){b=document.createDocumentFragment();c=
document.createElement("div");for(c.innerHTML=a;c.firstChild;)b.appendChild(c.firstChild);return b}if("json"===c||!c&&0<=b.indexOf("json"))return Ba(ta(a));("script"===c||!c&&0<=b.indexOf("javascript"))&&m(a);return a+""},g=function(a){return"/"==a.substr(0,1)?location.protocol+"//"+location.host+a:a},k=function(d,b){d.replace(c,"");if(!b.allowCache){var g=(new Date).getTime();d=e.test(d)?d.replace(e,"$1_="+g):d+(a.test(d)?"&":"?")+"_="+g}!b.data||"POST"==b.method||b.contentType||f&&b.data instanceof
window.FormData||(b.data=w(b.data)?b.data:va(b.data),d+=(a.test(d)?"&":"?")+b.data,b.data=null);return d},p=function(a,d,b){var c;if(!ma(a)&&!v(a)&&b){var g=document.createElement("input");g.setAttribute("type","hidden");g.setAttribute("name",b);g.setAttribute("value",a);d.appendChild(g)}else if(Q(a)&&b)for(g=0,c=a.length;g<c;g++)p(a[g],d,b+"["+g+"]");else if(ma(a))for(g in a)a.hasOwnProperty(g)&&p(a[g],d,b?b+"["+g+"]":g)},l=function(a){for(var d,b,c={},g=0;g<a.elements.length;g++)if(d=a.elements[g],
null!==E(d,"name"))if(b="INPUT"===d.nodeName.toUpperCase()?E(d,"type").toUpperCase():"TEXT","FILE"===b)for(b=0;b<d.files.length;c[d.name]=d.files[b++].name);else if("RADIO"!==b&&"CHECKBOX"!==b||d.checked)c[d.name]=d.value;return va(c)},m=function(a){var d=eval;a&&(/^[^\S]*use strict/.test(a)?(d=document.createElement("script"),d.text=a,document.head.appendChild(d).parentNode.removeChild(d)):d(a))};t({$class:"Ajax",$mixins:["mixin.Promise"],_jsonpName:null,_transport:null,_opt:null,_deferred:null,
_promise:null,_timeout:null,_form:null,_removeForm:!1,$init:function(a){a.url&&(a.url=g(a.url));var d=b.exec((window?window.location.href:"").toLowerCase())||[],c=b.exec(a.url.toLowerCase());this._opt=a;!0!==a.crossDomain&&!0!==a.ignoreCrossDomain&&(a.crossDomain=!(!c||c[1]===d[1]&&c[2]===d[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(d[3]||("http:"===d[1]?"80":"443"))));var e;a.files&&!f&&(a.transport="iframe");"iframe"!=a.transport||a.form?a.form&&(this._form=a.form,"POST"!=a.method||f||(a.transport=
"iframe")):(this.createForm(),a.form=this._form);if(a.form&&"iframe"!=a.transport&&"POST"==a.method)f?a.data=new FormData(a.form):(a.contentType="application/x-www-form-urlencoded",a.data=l(a.form));else if("json"==a.contentType)a.contentType=a.contentTypeHeader||"text/plain",a.data=w(a.data)?a.data:JSON.stringify(a.data);else if(R(a.data)&&"POST"==a.method&&f)for(e in d=a.data,a.data=new FormData,d)a.data.append(e,d[e]);a.files&&this.importFiles();a.url=k(a.url,a);this._transport=e=!a.crossDomain&&
"script"!=a.transport||a.form?"iframe"==a.transport?new aa.ajax.transport.IFrame(a,this.$$promise,this):new aa.ajax.transport.XHR(a,this.$$promise,this):new aa.ajax.transport.Script(a,this.$$promise,this);this.$$promise.done(function(a){h.trigger("success",a)});this.$$promise.fail(function(a){h.trigger("error",a)});this.$$promise.always(function(){h.trigger("end")});h.trigger("start");a.timeout&&(this._timeout=setTimeout(n(this.onTimeout,this),a.timeout));a.jsonp&&this.createJsonp();!1===h.trigger("before-send",
a,e)&&this.$$promise.reject();a.beforeSend&&!1===a.beforeSend.call(a.context,a,e)&&this.$$promise.reject();this.$$promise.isPending()?(r(e.send,e),this.$$promise.always(this.asyncDestroy,this)):r(this.asyncDestroy,this,[],1E3)},asyncDestroy:function(){this.$isDestroyed()||(this.$$promise.hasListeners()?r(this.asyncDestroy,this,[],1E3):this.$destroy())},abort:function(a){this.$$promise.reject(a||"abort");this._transport.abort();return this},onTimeout:function(){this.abort("timeout")},getTransport:function(){return this._transport},
createForm:function(){var a=document.createElement("form");a.style.display="none";a.setAttribute("method",this._opt.method);a.setAttribute("enctype","multipart/form-data");p(this._opt.data,a,null);document.body.appendChild(a);this._form=a;this._removeForm=!0},importFiles:function(){var a=this._opt,d=a.files,b=this._form;a=a.data;var c,g;var e=0;for(c=d.length;e<c;e++){var k=d[e];if(Q(k)){var f=k[0];k=k[1]}else f=window.File&&k instanceof File?k.uploadName||"upload"+(1<c?"[]":""):k.name||"upload"+
(1<c?"[]":"");if(!(window.File&&k instanceof File)){var h=k;k=null}if(b)h&&b.appendChild(h);else if(k)a.append(f,k);else if(h.files&&h.files.length)for(k=0,g=h.files.length;k<g;k++)a.append(f,h.files[k])}},createJsonp:function(){var d=this._opt,b=d.jsonpParam||"callback",c=d.jsonpCallback||"jsonp_"+T();d.url+=(a.test(d.url)?"&":"?")+b+"="+c;this._jsonpName=c;"undefined"!=typeof window&&(window[c]=n(this.jsonpCallback,this));"undefined"!=typeof global&&(global[c]=n(this.jsonpCallback,this));return c},
jsonpCallback:function(a){try{var d=this.processResponseData(a)}catch(ua){this.$$promise?this.$$promise.reject(ua):ba(ua)}this.$$promise&&this.$$promise.resolve(d)},processResponseData:function(a,b){var c=this._opt;a=d(a,c,b);h.hasListener("process-response")&&h.trigger("process-response",a,this.$$promise);c.processResponse&&(a=c.processResponse.call(c.context,a,this.$$promise));return a},returnResponse:function(a,d){return this._opt.jsonp?null:this.processResponseData(a,d)},processResponse:function(a,
d){var b=this.$$promise;if(this._opt.jsonp)if(a){try{m(a)}catch(ka){b.reject(ka)}b.isPending()&&b.reject("jsonp script didn't invoke callback")}else b.reject("jsonp script is empty");else{try{var c=this.processResponseData(a,d)}catch(ka){b.reject(ka)}b.resolve(c)}},destroy:function(){this._timeout&&clearTimeout(this._timeout);this._form&&this._form.parentNode&&this._removeForm&&this._form.parentNode.removeChild(this._form);this._transport.$destroy();this._jsonpName&&("undefined"!=typeof window&&delete window[this._jsonpName],
"undefined"!=typeof global&&delete global[this._jsonpName])}},{prepareUrl:k,global:h})})();var L=function(a,b,c){if(window.getComputedStyle){if(a===window)return b?c?0:null:{};a=getComputedStyle(a,null)}else a=a.currentStyle||a.style||{};b=b?a[b]:a;return c?parseFloat(b)||0:b},Da=function(){var a;return function(){if(void 0===a){var b=window.document,c=b.createElement("div"),e=b.createElement("div");b=b.body;e.style&&window.getComputedStyle?(c.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",
c.appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",e.innerHTML="",b.appendChild(c),e="4px"===window.getComputedStyle(e,null).width,b.removeChild(c),a=e):a=!1}return a}}();D=function(a,b){var c=/^([+-]?(?:d*.|)d+(?:[eE][+-]?d+|))(?!px)[a-z%]+$/i,e=["Top","Right","Bottom","Left"],h=a?"inner"===a?"padding":"":"content";return function(a,d){if(a===window)return a.document.documentElement["client"+
b];if(9===a.nodeType)return d=a.documentElement,Math.max(a.body["scroll"+b],d["scroll"+b],a.body["offset"+b],d["offset"+b],d["client"+b]);a:{var g=b.toLowerCase(),k=h||(!0===d?"margin":"border");d=L(a);var f=!0,l="width"===g?a.offsetWidth:a.offsetHeight,m="border-box"===d.boxSizing;if(0>=l||null==l){l=a.style[g];if(c.test(l)){d=l;break a}f=m&&(Da()||l===a.style[g]);l=parseFloat(l)||0}a=l;k=k||(m?"border":"content");g=k===(f?"border":"content")?4:"width"===g?1:0;for(m=0;4>g;g+=2)"margin"===k&&(m+=
parseFloat(d[k+e[g]])),f?("content"===k&&(m-=parseFloat(d["padding"+e[g]])),"margin"!==k&&(m-=parseFloat(d["border"+e[g]+"Width"]))):(m+=parseFloat(d["padding"+e[g]]),"padding"!==k&&(m+=parseFloat(d["border"+e[g]+"Width"])));d=a+m}return d}};var ca=D("outer","Width"),da=D("outer","Height"),Z={},Ea=function(){var a=/((^|[^a-z0-9_$\]\)'"])|(this))(\.)([^0-9])/ig,b=Function,c={},e=0,h={},f=0,d={},g=0,k=function(){1E3<=e&&(c={});1E3<=f&&(h={});1E3<=g&&(d={})};return{createGetter:function(d,g){try{if(!c[d]||
g){e++;var k="".concat("try {","return ",d.replace(a,"$2____.$5"),";} catch (thrownError) { return undefined; }");return g?"function(____) {"+k+"}":c[d]=new b("____",k)}return c[d]}catch(q){return ba(q),M}},createSetter:function(d,c){try{if(!h[d]||c){f++;var g=d.replace(a,"$2____.$5"),e="".concat("try {",g," = $$$$",";} catch (thrownError) { return undefined; }");return c?"function(____, $$$$) {"+e+"}":h[d]=new b("____","$$$$",e)}return h[d]}catch(z){return ba(z),M}},createFunc:function(c,e){try{if(!d[c]||
e){g++;var k="".concat("try {",c.replace(a,"$2____.$5"),";} catch (thrownError) { return undefined; }");return e?"function(____) {"+k+"}":d[c]=new b("____",k)}return d[c]}catch(q){return ba(q),M}},resetCache:k,enableResetCacheInterval:function(){setTimeout(k,1E4)}}}().createGetter;G.register("mixin.Observable",{$$observable:null,$$callbackContext:null,$$events:null,$beforeInit:function(a){this.$$observable=new la;this.$initObservable(a)},$initObservable:function(a){var b=this.$$observable,c;if(a&&
a.callback){var e=a.callback,h=e.context||e.scope||e.$context,f=y({},this.$$events,e.$events,!0,!1);for(c in f)b.createEvent(c,f[c]);e.context=null;e.scope=null;for(c in e)if(e[c])b.on(c,e[c],h||this);a.callback=null;h&&(this.$$callbackContext=h)}else if(this.$$events)for(c in this.$$events)b.createEvent(c,this.$$events[c])},on:function(){var a=this.$$observable;return a?a.on.apply(a,arguments):null},un:function(){var a=this.$$observable;return a?a.un.apply(a,arguments):null},once:function(){var a=
this.$$observable;return a?a.once.apply(a,arguments):null},trigger:function(){var a=this.$$observable;return a?a.trigger.apply(a,arguments):null},$beforeDestroy:function(){this.$$observable.trigger("before-destroy",this)},$afterDestroy:function(){this.$$observable.trigger("destroy",this);this.$$observable.destroy();this.$$observable=null}});G=function(a){var b=a?"pageYOffset":"pageXOffset",c=a?"scrollTop":"scrollLeft";a=window.document;var e=a.body,h=a.documentElement,f=function(a,d){return 0>a&&
!1===d?0:a};var d=void 0!==window[b]?function(){return window[b]}:h.clientHeight?function(){return h[c]}:function(){return e[c]};return function(a,b){return a&&a!==window?a&&1==a.nodeType&&a!==e&&a!==h?f(a[c],b):f(d(),b):f(d(),b)}};var ia=G(!0),ja=G(!1),Fa=D("","Width"),Ga=D("","Height");t({$class:"dialog.position.Abstract",dialog:null,positionBase:null,correct:"solid",$init:function(a){this.dialog=a;y(this,a.getCfg().position,!0,!1);this.onWindowResizeDelegate=n(this.onWindowResize,this);this.onWindowScrollDelegate=
n(this.onWindowScroll,this);var b=this.preferredType||this.type;if("string"==typeof b){var c=this.getAllPositions(),e;-1!=(e=c.indexOf(b))&&(c.splice(e,1),c.unshift(b));this.preferredType=c}else b||(this.preferredType=this.getAllPositions());a.on("reposition",this.onReposition,this);a.on("show-after-delay",this.onShowAfterDelay,this);a.on("hide-after-delay",this.onHideAfterDelay,this);if(a.isVisible())this.onShowAfterDelay()},getPositionBase:function(){if(this.positionBase)return this.positionBase;
var a;return(a=this.dialog.getCfg().position.base)?this.positionBase="string"==typeof a?u(a).shift():a:null},getBoundary:function(){var a=this.getPositionBase(),b=this.screenX||0,c=this.screenY||0;if(a){var e=K(a);var h=ca(a);a=da(a);return{x:e.left+b,y:e.top+c,x1:e.left+h-b,y1:e.top+a-c,w:h,h:a}}h=Fa(window);a=Ga(window);e=ia(window);var f=ja(window);return{x:f+b,y:e+c,x1:f+h-b,y1:e+a-c,w:h,h:a}},getPrimaryPosition:function(a){return!1},getSecondaryPosition:function(a){return!1},getAllPositions:function(){return[]},
correctPosition:function(a){var b=this.getPrimaryPosition(),c=this.correct;if(b&&c){var e=this.dialog;b=this.getBoundary();e=e.getDialogSize();var h=this.preferredType,f=h[0];if(c&&"solid"!=c){if(this.type!=f&&this.checkIfFits(a,f,b,e,!1))return this.changeType(f),this.fitToBoundary(this.getCoords(a),b,e);if(this.checkIfFits(a,this.type,b,e,!1))return this.fitToBoundary(this.getCoords(a),b,e)}if(c&&"position-only"!=c)for(c=0,f=h.length;c<f;c++)if(this.checkIfFits(a,h[c],b,e,!0)){this.changeType(h[c]);
break}return this.getCoords(a)}},checkIfFits:function(a,b,c,e,h){a=this.getCoords(a,b,!0);if(!h&&this.getSecondaryPosition(b))return!1;if(h)return!(a.x<c.x||a.y<c.y||a.x+e.width>c.x1||a.y+e.height>c.y1);switch(this.getPrimaryPosition(b)){case "t":return a.y>=c.y;case "r":return a.x+e.width<=c.x1;case "b":return a.y+e.height<=c.y1;case "l":return a.x>=c.x}},fitToBoundary:function(a,b,c){var e=this.getPositionBase(),h=e?0:b.x,f=e?0:b.y,d=e?b.w:b.x1;b=e?b.h:b.y1;var g=e=0,k=this.dialog.getPointer();
a.x<h&&(e=a.x-h,a.x=h);a.y<f&&(g=a.y-f,a.y=f);a.x+c.width>d&&(e=a.x+c.width-d,a.x-=e);a.y+c.height>b&&(g=a.y+c.height-b,a.y-=g);k.setCorrectionOffset(e,g);k.reposition();return a},changeType:function(a){var b=this.dialog.getPointer();this.type=a;b.setType(null,null)},onReposition:function(a,b){a=!1!==this.screenX||!1!==this.screenY?this.correctPosition(b):this.getCoords(b);this.apply(a)},getCoords:function(a){return{left:0,top:0}},apply:function(a){if(a&&!isNaN(a.x)&&!isNaN(a.y)){var b=this.dialog,
c=b.getCfg().position.axis,e={};"y"!=c&&(e.left=a.x+"px");"x"!=c&&(e.top=a.y+"px");C(b.getElem(),e)}},onWindowResize:function(a){this.dialog.reposition(x(a))},onWindowScroll:function(a){this.dialog.reposition(x(a))},onShowAfterDelay:function(){(this.resize||this.screenX||this.screenY)&&A(window,"resize",this.onWindowResizeDelegate);(this.scroll||this.screenX||this.screenY)&&A(this.dialog.getScrollEl(this.scroll),"scroll",this.onWindowScrollDelegate)},onHideAfterDelay:function(){(this.resize||this.screenX||
this.screenY)&&F(window,"resize",this.onWindowResizeDelegate);(this.scroll||this.screenX||this.screenY)&&F(this.dialog.getScrollEl(this.scroll),"scroll",this.onWindowScrollDelegate)},destroy:function(){var a=this.dialog;F(window,"resize",this.onWindowResizeDelegate);F(a.getScrollEl(this.scroll),"scroll",this.onWindowScrollDelegate);a.un("reposition",this.onReposition,this);a.un("show-after-delay",this.onShowAfterDelay,this);a.un("hide-after-delay",this.onHideAfterDelay,this);if(a.isVisible())this.onHideAfterDelay()}});
var za=function(){return function c(b){if(b===window)return!0;if(3==b.nodeType)return b.parentElement?c(b.parentElement):!0;var e=window.document.documentElement;return b===e?!0:e.contains(b)}}();t({$class:"dialog.position.Target",$extends:"dialog.position.Abstract",getCoords:function(a,b,c){var e=this.dialog,h=e.getCfg(),f=e.getTarget();if(!f)return null;b=b||this.type;var d=this.getPositionBase();a=e.getDialogSize();if(d&&!c)a:{c={top:0,left:0};var g=window.document.documentElement;if(f===window||
f===g)f=c;else{if("fixed"==L(f,"position"))var k=f.getBoundingClientRect();else if(d){f=K(f);c=K(d);f={left:f.left-c.left,top:f.top-c.top};0>f.left&&(f.left=0);0>f.top&&(f.top=0);break a}else{d=window.document.documentElement;for(k=f.offsetParent||d;k&&k!=d&&"static"==L(k,"position");)k=k.offsetParent;d=k||d;k=K(f);d!==g&&(c=K(d));c.top+=L(d,"borderTopWidth",!0);c.left+=L(d,"borderLeftWidth",!0)}f={top:k.top-c.top-L(f,"marginTop",!0),left:k.left-c.left-L(f,"marginLeft",!0)}}}else f=K(f);c=e.getTargetSize();
g={};d=b.substr(0,1);k=b.substr(1);var p=h.position.offsetX;h=h.position.offsetY;b=e.pointer.getDialogPositionOffset(b);switch(d){case "t":g.y=f.top-a.height-h;break;case "r":g.x=f.left+c.width+p;break;case "b":g.y=f.top+c.height+h;break;case "l":g.x=f.left-a.width-p}switch(k){case "t":g.y=f.top+h;break;case "r":g.x=f.left+c.width-a.width-p;break;case "b":g.y=f.top+c.height-a.height-h;break;case "l":g.x=f.left+p;break;case "rc":g.x=f.left+c.width+p;break;case "lc":g.x=f.left-a.width-p;break;case "":switch(d){case "t":case "b":g.x=
f.left+c.width/2-a.width/2;break;case "r":case "l":g.y=f.top+c.height/2-a.height/2}}b&&(g.x+=b.x,g.y+=b.y);return g},getPrimaryPosition:function(a){return(a||this.type).substr(0,1)},getSecondaryPosition:function(a){return(a||this.type).substr(1)},getAllPositions:function(){return"t r b l tl tr rt rb br bl lb lt tlc trc brc blc".split(" ")}});t({$class:"dialog.position.Mouse",$extends:"dialog.position.Target",correct:"position",$init:function(a){this.onMouseMoveDelegate=n(this.onMouseMove,this);this.$super(a)},
getCoords:function(a,b,c){if(!a)return null;var e=b||this.type,h=this.dialog,f=h.getCfg(),d=h.getDialogSize(),g=this.getPositionBase(),k={};b=(b||this.type).substr(1);var p=f.position.offsetX,l=f.position.offsetY;f=f.position.axis;e=h.getPointer().getDialogPositionOffset(e);var m=0,q=0;!c&&g&&(g=K(g),m=g.left,q=g.top);switch(b){case "":k=this.get.call(h.$$callbackContext,h,a,b,c);break;case "c":k.y=a.pageY-q-d.height/2;k.x=a.pageX-m-d.width/2;break;case "t":k.y=a.pageY-q-d.height-l;k.x=a.pageX-m-
d.width/2;break;case "r":k.y=a.pageY-q-d.height/2;k.x=a.pageX-m+p;break;case "b":k.y=a.pageY-q+l;k.x=a.pageX-m-d.width/2;break;case "l":k.y=a.pageY-q-d.height/2;k.x=a.pageX-m-d.width-p;break;case "rt":k.y=a.pageY-q-d.height-l;k.x=a.pageX-m+p;break;case "rb":k.y=a.pageY-q+l;k.x=a.pageX-m+p;break;case "lt":k.y=a.pageY-q-d.height-l;k.x=a.pageX-m-d.width-p;break;case "lb":k.y=a.pageY-q+l,k.x=a.pageX-m-d.width-p}e&&(k.x+=e.x,k.y+=e.y);f&&(a=this.$super(a,b))&&("x"==f?k.y=a.y:k.x=a.x);return k},onShowAfterDelay:function(){this.$super();
A(window.document.documentElement,"mousemove",this.onMouseMoveDelegate)},onHideAfterDelay:function(){this.$super();F(window.document.documentElement,"mousemove",this.onMouseMoveDelegate)},onMouseMove:function(a){this.dialog.reposition(x(a))},getPrimaryPosition:function(a){return(a||this.type).substr(1,1)},getSecondaryPosition:function(a){return(a||this.type).substr(2)},getAllPositions:function(){return"mt mr mb ml mrt mrb mlb mlt".split(" ")}});t({$class:"dialog.position.Window",$extends:"dialog.position.Abstract",
getCoords:function(a,b){var c=this.dialog;a=this.getPositionBase()||window;c=c.getDialogSize();var e={};b=(b||this.type).substr(1);var h=this.offsetX,f=this.offsetY,d=ia(a),g=ja(a),k=ca(a);a=da(a);switch(b){case "c":e.y=a/2-c.height/2+d;e.x=k/2-c.width/2+g;break;case "t":e.y=d+f;e.x=k/2-c.width/2+g;break;case "r":e.y=a/2-c.height/2+d;e.x=k-c.width+g-h;break;case "b":e.y=a-c.height+d-f;e.x=k/2-c.width/2+g;break;case "l":e.y=a/2-c.height/2+d;e.x=g+h;break;case "rt":e.y=d+f;e.x=k-c.width+g-h;break;case "rb":e.y=
a-c.height+d-f;e.x=k-c.width+g-h;break;case "lt":e.y=d+f;e.x=g+h;break;case "lb":e.y=a-c.height+d-f,e.x=g+h}return e},getPrimaryPosition:function(a){return(a||this.type).substr(1,1)},getSecondaryPosition:function(a){return(a||this.type).substr(2)},getAllPositions:function(){return"wt wr wb wl wrt wrb wlb wlt wc".split(" ")},correctPosition:function(a){return this.getCoords(a)}});t({$class:"dialog.position.Custom",$extends:"dialog.position.Abstract",getCoords:function(a){var b=this.dialog;return this.get.call(b.$$callbackContext,
b,a)}});t({$class:"dialog.pointer.Abstract",enabled:null,node:null,correctX:0,correctY:0,$init:function(a,b){y(this,b,!0,!1);this.origCfg=b;this.dialog=a;this.opposite={t:"b",r:"l",b:"t",l:"r"};this.names={t:"top",r:"right",b:"bottom",l:"left"};this.sides={t:["l","r"],r:["t","b"],b:["r","l"],l:["b","t"]};this.enabled=!1!==this.enabled&&b.size?!0:!1},enable:function(){this.enabled||(this.enabled=!0,this.render(),this.dialog.isVisible()&&this.dialog.reposition())},disable:function(){this.enabled&&(this.remove(),
this.enabled=!1,this.dialog.isVisible()&&this.dialog.reposition())},getElem:function(){return this.node},getSize:function(){return this.enabled?this.size:0},setCorrectionOffset:function(a,b){this.correctX=a;this.correctY=b},getCorrectionValue:function(a,b,c){if(!b)return 0;var e=c.substr(0,1);c=c.substr(1,1);var h=this.dialog.getDialogSize(),f=this.width,d="t"==e||"b"==e?"width":"height";switch(c){case "":var g=h[d]/2-f/2;var k=-g;break;case "l":k=0;g=h[d]-f/2;break;case "r":k=-(h[d]-f/2),g=0}b=0>
b?Math.max(k,b):Math.min(g,b);return("t"==e||"b"==e)&&"x"==a||("l"==e||"r"==e)&&"y"==a?b:0},getDialogPositionOffset:function(a){var b=(this.detectPointerPosition(a)||"").substr(0,1);a=this.dialog.getPosition().getPrimaryPosition(a);var c={x:0,y:0};if(!this.enabled)return c;b==this.opposite[a]&&(c["t"==b||"b"==b?"y":"x"]="b"==b||"r"==b?-this.size:this.size);return c},detectPointerPosition:function(a){if(this.position&&!a)return v(this.position)?this.position.call(this.dialog.$$callbackContext,this.dialog,
this.origCfg):this.position;var b=this.dialog.getPosition().getPrimaryPosition(a);a=this.dialog.getPosition().getSecondaryPosition(a);var c=a.substr(1,1);if(!b)return null;b=this.opposite[b];a&&(a=a.substr(0,1),b="c"==c?b+this.opposite[a]:b+a);return b},detectPointerDirection:function(a){return this.direction?v(this.direction)?this.direction.call(this.dialog.$$callbackContext,this.dialog,a,this.origCfg):this.direction:a},update:function(){this.remove();this.render();this.append();this.dialog.isVisible()&&
this.dialog.reposition()},setType:function(a,b){this.position=a;this.direction=b;this.update();this.reposition()},render:function(){},destroy:function(){this.remove()},reposition:function(){},append:function(){if(this.enabled&&(this.node||this.render(),this.node)){this.reposition();var a=this.dialog.getElem();a&&a.appendChild(this.node)}},remove:function(){var a=this.node;a&&(a.parentNode&&a.parentNode.removeChild(a),this.node=null)}});(function(){var a=null,b={backgroundColor:"transparent",width:"0px",
height:"0px",position:"absolute",fontSize:"0px",lineHeight:"0px"};return t({$class:"dialog.pointer.Html",$extends:"dialog.pointer.Abstract",node:null,sub:null,$init:function(b,e){null===a&&(a=window.document.all&&!window.XMLHttpRequest);this.$super(b,e);this.width=this.width||2*this.size;this.inner&&(this.enabled=!0)},createInner:function(){var a=y({},this.origCfg);a.size=this.size-2*this.border;a.width=this.width-4*this.border;a.border=0;a.borderColor=null;a.borderCls=null;a.offset=0;a.inner=this.border;
this.sub=O("dialog.pointer.Html",this.dialog,a)},getBorders:function(b,e,h){var c={},d=b.substr(0,1);b=e.substr(0,1);var g=e.substr(1);e=a?"dotted":"solid";var k=this.names,p=this.sides,l=this.opposite;c["border"+H(k[l[d]])]=this.size+"px solid "+h;c["border"+H(k[d])]="0 "+e+" transparent";g?(c["border"+H(k[g])]="0 solid transparent",c["border"+H(k[l[g]])]=this.width+"px "+e+" transparent"):(h=Math.floor(this.width/2),c["border"+H(k[p[b][0]])]=h+"px "+e+" transparent",c["border"+H(k[p[b][1]])]=h+
"px "+e+" transparent");return c},getOffsets:function(a,b){var c={},e=this.names,d=this.opposite,g=a.substr(0,1),k="t"==g||"b"==g?"r":"b";c[e[g]]=this.inner?"auto":-this.size+"px";c[e[k]]="auto";if(this.inner)a=b.substr(0,1),b=b.substr(1),c[e[d[k]]]=b?"l"==b||"t"==b?this.inner+"px":-this.width-this.inner+"px":Math.floor(-this.width/2)+"px",c[e[d[a]]]=-(this.size+2*this.inner)+"px";else{switch(a){case "t":case "r":case "b":case "l":b=b!=a?"l"==b||"t"==b?this.offset:-this.width+this.offset:-this.width/
2+this.offset;break;case "bl":case "tl":case "lt":case "rt":b=this.offset;break;default:b=-this.width-this.offset}c["margin"+H(e[d[k]])]=b+"px";switch(a){case "t":case "r":case "b":case "l":b="50%";break;case "tr":case "rb":case "br":case "lb":b="100%";break;default:b=0}c[e[d[k]]]=b;e=sa().transform;d="";k=this.correctX;b=this.correctY;e&&(k&&(d+=" translateX("+this.getCorrectionValue("x",k,a)+"px)"),b&&(d+=" translateY("+this.getCorrectionValue("y",b,a)+"px)"),c[e]=d)}return c},render:function(){if(this.enabled&&
!this.node&&this.detectPointerPosition()){this.border&&!this.sub&&this.createInner();this.node=window.document.createElement("div");var a=window.document.createComment(" ");this.node.appendChild(a);C(this.node,b);J(this.node,this.borderCls||this.cls);this.sub&&(this.sub.render(),this.node.appendChild(this.sub.getElem()))}},reposition:function(){var a=this.detectPointerPosition(),b=this.detectPointerDirection(a);this.node&&(C(this.node,this.getBorders(a,b,this.borderColor||this.color)),C(this.node,
this.getOffsets(a,b)),this.sub&&this.sub.reposition())},update:function(){this.sub&&(this.sub.$destroy(),this.sub=null);this.remove();this.node=null;this.render();this.append();this.dialog.isVisible()&&this.dialog.reposition()},destroy:function(){this.sub&&(this.sub.$destroy(),this.sub=null);this.$super()},remove:function(){this.sub&&this.sub.remove();this.$super()}})})();t({$class:"dialog.Overlay",dialog:null,enabled:!1,color:"#000",opacity:.5,cls:null,animateShow:!1,animateHide:!1,$mixins:["mixin.Observable"],
$init:function(a){this.dialog=a;this.onClickDelegate=n(this.onClick,this);y(this,a.getCfg().overlay,!0,!1);this.$$observable.createEvent("click",!1);this.enabled&&(this.enabled=!1,this.enable())},getElem:function(){this.enabled&&!this.node&&this.render();return this.node},enable:function(){this.enabled||(this.enabled=!0)},disable:function(){this.enabled&&(this.remove(),this.enabled=!1)},show:function(a){this.enabled&&(this.animateShow?this.animate("show",a):this.node.style.display="block")},hide:function(a){this.node&&
(this.animateHide?this.animate("hide",a):this.node.style.display="none")},render:function(){if(this.enabled){var a=window.document.createElement("div"),b=this.dialog.getCfg();C(a,{display:"none",position:"fixed",left:0,top:0,right:0,bottom:0,opacity:this.opacity,backgroundColor:this.color});A(a,"click",this.onClickDelegate);b.render.zIndex&&C(a,"zIndex",b.render.zIndex);this.cls&&J(a,this.cls);this.node=a}},remove:function(){var a=this.node;a&&I(function(){a.parentNode&&a.parentNode.removeChild(a)})},
append:function(){var a=this.dialog.getCfg().render.appendTo||window.document.body;this.enabled&&(this.node||this.render(),a.appendChild(this.node))},animate:function(a,b){var c=this.node;var e="show"==a?this.animateShow:this.animateHide;v(e)&&(e=e(this,b));W(e)?e=a:w(e)&&(e=[e]);return ea(c,e,function(){if("show"==a){var b=new U;I(function(){c.style.display="";b.resolve()});return b}},!1)},onClick:function(a){return!1===this.trigger("click",this.dialog,this,a)?null:this.modal?(a=x(a),a.preventDefault(),
a.stopPropagation(),!1):null},destroy:function(){this.remove()}});t({$class:"dialog.Manager",all:null,groups:null,$init:function(){this.all={};this.groups={}},register:function(a){var b=a.getInstanceId(),c=a.getGroup(),e=this.groups,h;this.all[b]=a;var f=0;for(h=c.length;f<h;f++){var d=c[f];e[d]||(e[d]={});e[d][b]=!0}a.on("destroy",this.unregister,this)},unregister:function(a){a=a.getInstanceId();delete this.all[a]},hideAll:function(a){var b=a.getInstanceId();a=a.getGroup();var c=this.all,e=this.groups,
h,f;var d=0;for(h=a.length;d<h;d++){var g=a[d];g=e[g];for(f in g)c[f]?f==b||c[f].isHideAllIgnored()||c[f].hide(null,!0,!0):delete g[f]}}});return function(){var a=O("dialog.Manager"),b=function(a,b,c,e){if("show"===c||!e)return b.preventDefault(),b.stopPropagation(),!1},c=function(a,b,c,e){var d=a[b],g=!1;if(void 0!==d){switch(e){case "string":g=w(d);break;case "function":g=v(d);break;case "number":g=1===V(d)||d==parseInt(d);break;case "dom":g=d&&(d.tagName||d.nodeName)?!0:!1;break;case "jquery":(g=
d&&d.jquery?!0:!1)&&(d=d.get(0));break;case "boolean":if(!0===d||!1===d)g=!0;break;default:!0===e&&!0===d&&(g=!0),!1===e&&!1===d&&(g=!0)}g&&(a[b]={},a[b][c]=d)}},e=function(a){if(!a)return{};c(a,"content","value","string");c(a,"content","value","boolean");c(a,"content","fn","function");c(a,"ajax","url","string");c(a,"cls","dialog","string");c(a,"render","tpl","string");c(a,"render","fn","function");c(a,"render","el","dom");c(a,"render","el","jquery");c(a,"show","events",!1);c(a,"show","events","string");
c(a,"hide","events",!1);c(a,"hide","events","string");c(a,"toggle","events",!1);c(a,"toggle","events","string");c(a,"position","type","string");c(a,"position","type",!1);c(a,"position","get","function");c(a,"overlay","enabled","boolean");c(a,"pointer","position","string");c(a,"pointer","size","number");return a},h={target:null,group:null,modal:!1,useHref:!1,content:{value:"",fn:null,prepare:null,attr:null},ajax:{url:null,data:null,dataType:"text",method:"GET"},cls:{dialog:null,visible:null,hidden:null,
loading:null},selector:{content:null},buttons:null,render:{tpl:"<div></div>",fn:null,el:null,zIndex:null,lazy:!0,style:null,appendTo:null,id:null,keepVisible:!1,keepInDOM:!1,lifetime:null},events:{show:{"*":{process:b}},hide:{"*":{process:b}}},show:{delay:null,single:!1,events:null,animate:!1,ignoreHideAll:!1,focus:!1,preventScroll:!1,display:"block"},hide:{delay:null,timeout:null,events:null,destroy:!1,remove:!1,animate:!1,cancelShowDelay:!0},toggle:{events:null},position:{type:"t",preferredType:null,
offsetX:0,offsetY:0,axis:null,get:null,screenX:!1,screenY:!1,base:null,scroll:!1,resize:!0},pointer:{position:null,direction:null,size:0,width:null,color:null,offset:0,border:0,borderColor:null,el:null,cls:null,borderCls:null},overlay:{enabled:!1,color:"#000",opacity:.5,cls:null,animateShow:!1,animateHide:!1},callback:{context:null,"content-change":null,"before-show":null,show:null,"before-hide":null,hide:null,render:null,lifetime:null,"target-change":null,button:null}},f=t({$class:"Dialog",$mixins:["mixin.Observable"],
id:null,node:null,overlay:null,pointer:null,cfg:null,position:null,target:null,dynamicTarget:!1,dynamicTargetEl:null,visible:!1,enabled:!0,frozen:!1,rendered:!1,bindSelfOnRender:!1,hideTimeout:null,hideDelay:null,showDelay:null,destroyDelay:null,images:0,positionGetType:null,positionClass:null,positionAttempt:0,$constructor:function(){this.$$events={"before-show":{returnResult:!1},"before-hide":{returnResult:!1}};this.$super.apply(this,arguments)},$init:function(d){d=d||{};var b=d.preset;d.preset=
null;this.cfg=d=y({},h,e(f.defaults),e(f[b]),e(d),!0,!0);this.id=T();this.onPreventScrollDelegate=n(this.onPreventScroll,this);this.onButtonClickDelegate=n(this.onButtonClick,this);this.onButtonKeyupDelegate=n(this.onButtonKeyup,this);this.showDelegate=n(this.show,this);this.hideDelegate=n(this.hide,this);this.toggleDelegate=n(this.toggle,this);this.onImageLoadDelegate=n(this.onImageLoad,this);a.register(this);d.modal&&(d.overlay.enabled=!0);this.overlay=O("dialog.Overlay",this);b=H(d.pointer.$class||
"Html");this.pointer=O("dialog.pointer."+b,this,d.pointer);v(d.position.type)&&(this.positionGetType=d.position.type);this.setTarget(d.target);d.target&&d.useHref&&(b=E(this.getTarget(),"href"),"#"===b.substr(0,1)?d.render.el=b:d.ajax.url=b);d.render.lazy||this.render();this.trigger("init",this);this.setHandlers("bind")},getElem:function(){return this.node},getInstanceId:function(){return this.id},getCfg:function(){return this.cfg},getPointer:function(){return this.pointer},getOverlay:function(){return this.overlay},
isEnabled:function(){return this.enabled},isVisible:function(){return this.visible},isHideAllIgnored:function(){return this.cfg.show.ignoreHideAll},isFrozen:function(){return this.frozen},isRendered:function(){return this.rendered},enable:function(){this.enabled=!0},disable:function(){this.hide();this.enabled=!1},freeze:function(){this.frozen=!0},unfreeze:function(){this.frozen=!1},getGroup:function(){var a=this.cfg;return a.group?w(a.group)?[a.group]:a.group:[""]},toggle:function(a,b){return a&&
a.stopPropagation&&this.dynamicTarget&&this.visible&&this.isDynamicTargetChanged(a)?this.show(a):this[this.visible?"hide":"show"](a,b)},resetHandlers:function(a,b){this.setHandlers("unbind");this.bindSelfOnRender=!1;a&&a.call(b,this,this.getCfg());this.setHandlers("bind")},setHandlers:function(a,b){var d=this.cfg,c=["show","hide","toggle"],g="bind"===a?A:F;a="bind"===a?xa:ya;for(var e,f,h,n,t,y,r,B,v,x;e=c.shift();)if(f=d[e].events,!1!==f){if(w(f)||Q(f))this.dynamicTarget?(t={},t[f]=d.target,f={_html:t}):
f={_target:f};for(h in f){if(b)if("_self"===b){if("_self"!==h&&"_overlay"!==h&&">"!==h.substr(0,1))continue}else if(h!==b)continue;if("_self"!==h&&"_overlay"!==h&&">"!==h.substr(0,1)||this.node){if(r=f[h]){switch(h){case "_target":B=[this.getTarget()];break;case "_self":B=[this.node];break;case "_window":B=[window];break;case "_document":B=[window.document];break;case "_html":B=[window.document.documentElement];break;case "_overlay":B=[this.overlay.getElem()];break;default:B=">"===h.substr(0,1)?u(h.substr(1),
this.node):u(h)}if(B&&B.length)if(w(r)&&(r=[r]),Q(r))for(t=0,y=r.length;t<y;t++)for(v=-1,x=B.length;++v<x;g(B[v],r[t],this[e+"Delegate"]));else for(n in r)for(v=-1,x=B.length;++v<x;a(B[v],r[n],n,this[e+"Delegate"]));}}else this.bindSelfOnRender=!0}}},onPreventScroll:function(a){x(a).preventDefault()},onButtonClick:function(a){var d=x(a).target;(d=P(d,"metaphorjsTooltip-button-id"))&&this.trigger("button",this,d,a)},onButtonKeyup:function(a){if(13===a.keyCode||32===a.keyCode){var d=P(a.target,"metaphorjsTooltip-button-id");
d&&this.trigger("button",this,d,x(a))}},getEventConfig:function(a,b){var d=this.node;for(var c=a.type,g=a.target,e=null,f;g&&g!==d;){if(f=E(g,"data-"+b+"-"+c)){e=Ea(f)({});break}g=g.parentNode}d=e;c=this.cfg;!d&&c.events[b]&&(d=c.events[b][a.type]||c.events[b]["*"]);return d},show:function(d,b){var c=this.cfg,g=null,e=c.show,f=null;d&&(d=x(d));this.isEnabled()||(f="disabled");!f&&this.visible&&this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=r(this.hide,this,null,c.hide.timeout),
f="hidetimeout");!f&&this.hideDelay&&(window.clearTimeout(this.hideDelay),this.hideDelay=null,this.visible=!0,f="hidedelay");!f&&this.frozen&&(f="frozen");this.destroyDelay&&(window.clearTimeout(this.destroyDelay),this.destroyDelay=null);c=!1;d&&this.dynamicTarget&&(c=this.changeDynamicTarget(d));this.visible&&(c?(this.reposition(d),f="reposition"):f=f||"visible");if(!f||c)this.node?c&&this.changeDynamicContent():this.render();f||!1!==this.trigger("before-show",this,d)||(f="beforeshow");var h;d&&
(h=this.getEventConfig(d,"show"))&&(h.process?g=h.process(this,d,"show",f):(h.stopPropagation&&d.stopPropagation(),h.preventDefault&&d.preventDefault(),g=h.returnValue));if(f)return g;qa(this.node);this.visible=!0;e.single&&a.hideAll(this);this.toggleTitleAttribute(!1);e.delay&&!b?this.showDelay=r(this.showAfterDelay,this,[d],e.delay):this.showAfterDelay(d,b);return g},showAfterDelay:function(a,b){var d=this,c=d.cfg;d.showDelay=null;if(d.visible){d.trigger("show-after-delay",d,a);c.hide.remove&&d.appendElem();
d.reposition(a);if(c.show.preventScroll){var g=c.show.preventScroll,e;!0===g&&(g="body");g=u(g);var f=-1;for(e=g.length;++f<e;A(g[f],"mousewheel",d.onPreventScrollDelegate)&&A(g[f],"touchmove",d.onPreventScrollDelegate));}d.overlay.show();c.show.animate&&!b?d.animate("show").done(function(){d.showAfterAnimation(a)}):I(function(){d.showAfterAnimation(a)})}},showAfterAnimation:function(a){var d=this.cfg,b=this.node;this.visible&&(fa(b,d.cls.hidden),J(b,d.cls.visible),d.render.keepVisible||(b.style.display=
d.show.display||"block"),d.hide.timeout&&(this.hideTimeout=r(this.hide,this,null,d.hide.timeout)),d.show.focus&&r(this.setFocus,this,null,20),this.trigger("show",this,a))},hide:function(a,b,c){var d=null,g=null,e=this.cfg;this.hideTimeout=null;!this.visible&&this.hideDelay&&b&&(window.clearTimeout(this.hideDelay),this.hideDelay=null,this.visible=!0);this.node&&this.visible&&this.isEnabled()||(g=this.node?this.visible?"disabled":"hidden":"noelem");this.showDelay&&!g&&(e.hide.cancelShowDelay||c?(window.clearTimeout(this.showDelay),
this.showDelay=null,this.visible=!1,g="cancel"):g="delay");this.frozen&&!g&&(g="frozen");g||!1!==this.trigger("before-hide",this,a)||(g="beforehide");var f;a&&a.stopPropagation&&(f=this.getEventConfig(a,"hide"))&&(f.process?d=f.process(this,a,"hide",g):(f.stopPropagation&&a.stopPropagation(),f.preventDefault&&a.preventDefault(),d=f.returnValue));if(g)return d;qa(this.node);this.visible=!1;this.toggleTitleAttribute(!0);this.dynamicTarget&&this.resetDynamicTarget();e.hide.delay&&!b?this.hideDelay=r(this.hideAfterDelay,
this,[a],e.hide.delay):this.hideAfterDelay(a,b);return d},hideAfterDelay:function(a,b){var d=this,c=d.cfg;d.hideDelay=null;if(!d.visible){d.trigger("hide-after-delay",d,a);if(c.show.preventScroll){var g=c.show.preventScroll,e;!0===g&&(g="body");g=u(g);var f=-1;for(e=g.length;++f<e;F(g[f],"mousewheel",d.onPreventScrollDelegate)&&F(g[f],"touchmove",d.onPreventScrollDelegate));}d.overlay.hide();c.hide.animate&&!b?d.animate("hide").done(function(){d.hideAfterAnimation(a)}):I(function(){d.hideAfterAnimation(a)})}},
hideAfterAnimation:function(a){var d=this,b=d.cfg,c=d.node;d.visible||(fa(c,b.cls.visible),J(c,b.cls.hidden),b.render.keepVisible||(c.style.display="none"),d.trigger("hide",d,a),a=b.render.lifetime,null!==a&&(0===a?d.destroyElem():d.destroyDelay=r(d.destroyElem,d,null,a)),c&&b.hide.destroy?I(function(){P(c,b.instanceName,null);d.$destroy()}):c&&b.hide.remove&&I(function(){d.removeElem()}))},render:function(){var a=this.cfg;if(!this.node){var b=a.render,c=a.cls;if(b.fn){var e=b.fn.call(this.$$callbackContext,
this);b[w(e)?"tpl":"el"]=e}b.el?w(b.el)?(e=u(b.el).shift(),b.keepInDOM=!0):e=b.el:(e=window.document.createElement("div"),e.innerHTML=b.tpl,e=e.firstChild);e||(e=window.document.createElement("div"));this.node=e;b.id&&e.setAttribute("id",b.id);a.render.keepVisible||(e.style.display="none");J(e,c.dialog);J(e,c.hidden);b.style&&C(e,b.style);this.overlay.render();a.hide.remove?e.parentNode&&e.parentNode.removeChild(e):this.appendElem();b.zIndex&&C(e,{zIndex:b.zIndex});b=a.content;if(!1!==b.value)if(b.value)this.setContent(b.value);
else if(b.fn)this.setContent(b.fn.call(this.$$callbackContext,this));else this[a.ajax.url?"loadContent":"readContent"]();this.pointer.render();this.pointer.append();if(a.buttons)for(var f in a.buttons)if(b=u(a.buttons[f],e).shift())P(b,"metaphorjsTooltip-button-id",f),A(b,"click",this.onButtonClickDelegate),A(b,"keyup",this.onButtonKeyupDelegate);this.bindSelfOnRender&&(this.setHandlers("bind","_self"),this.bindSelfOnRender=!1);this.rendered=!0;this.trigger("render",this)}},setPositionType:function(a){var b=
this.getPositionClass(a);this.cfg.position.type=a;this.positionClass===b&&this.position?this.position.type=a:(this.position&&(this.position.$destroy(),this.position=null),b&&(this.position=O(b,this)));this.isVisible()&&this.reposition()},getPosition:function(a){var b=this.cfg.position;if(!this.position){!this.positionGetType&&"custom"!==b.type&&v(b.get)&&"m"!==b.type&&(b.type="custom");a=this.positionGetType?this.positionGetType.call(this.$$callbackContext,this,a):b.type;var d=this.getPositionClass(a);
b.type=a;if(!1===d)return;this.positionClass!==d?this.position=O(this.getPositionClass(a),this):this.position.type=a}return this.position},getPositionClass:function(a){return a?v(a)||"custom"===a?"dialog.position.Custom":(a=a.substr(0,1))?"w"===a?"dialog.position.Window":"m"===a?"dialog.position.Mouse":"dialog.position.Target":!1:!1},reposition:function(a){this.repositioning||(this.repositioning=!0,a&&(a=x(a)),this.getPosition(a),this.trigger("before-reposition",this,a),this.getPosition(a),this.trigger("reposition",
this,a),this.repositioning=!1)},getTarget:function(){return this.dynamicTarget?this.dynamicTargetEl:this.target},setTarget:function(a){if(a){var b=!1,d=this.target;this.target?(this.setHandlers("unbind","_target"),b=!0):this.dynamicTarget&&(b=!0);var c=w(a);c&&"#"!==a.substr(0,1)?(this.dynamicTarget=!0,this.target=null):(c&&(a=u(a).shift()),this.dynamicTarget=!1,this.target=a);b&&(this.setHandlers("bind","_target"),this.trigger("target-change",this,a,d))}},resetDynamicTarget:function(){var a=this.dynamicTargetEl;
a&&(this.setHandlers("unbind","_target"),this.trigger("target-change",this,null,a))},isDynamicTargetChanged:function(a){var b=this.cfg.target;a=a.target;for(var d=this.dynamicTargetEl;a&&!ha(a,b);)a=a.parentNode;return a?!d||d!==a:!1},changeDynamicTarget:function(a){var b=this.cfg.target;a=a.target;for(var d=this.dynamicTargetEl;a&&!ha(a,b);)a=a.parentNode;if(!a||d&&d===a)return!1;d&&this.setHandlers("unbind","_target");this.dynamicTargetEl=a;this.setHandlers("bind","_target");this.trigger("target-change",
this,a,d);return!0},getContentElem:function(){var a=this.node;return a?this.cfg.selector.content?u(this.cfg.selector.content,a).shift()||a:a:null},setContent:function(a,b){b=b||"";var d=this.node,c=this.cfg,e=this.pointer;if(!d)return c.content.value=a,this;c.content.prepare&&(a=c.content.prepare.call(this.$$callbackContext,this,b,a));var g=this.getContentElem(),f=this.rendered&&!c.selector.content&&e;e=f&&e.getElem();if(f&&e)try{d.removeChild(e)}catch(Ca){}if(w(a))g.innerHTML=a;else for(var h in a){var n=
c.selector[h];n&&(n=u(n,g).shift())&&(n.innerHTML=a[h])}if(f&&e)try{d.appendChild(e)}catch(Ca){}d=u("img",g);this.images=d.length;h=-1;for(c=d.length;++h<c;A(d[h],"load",this.onImageLoadDelegate));this.trigger("content-change",this,a,b);this.onContentChange()},readContent:function(){var a=this.cfg,b=this.getTarget(),c;b&&(c=a.content.attr?E(b,a.content.attr):E(b,"tooltip")||E(b,"title")||E(b,"alt"));c&&this.setContent(c,"attribute")},loadContent:function(a){var b=this.cfg;J(this.node,b.cls.loading);
a=y({},b.ajax,a,!0,!0);this.trigger("before-ajax",this,a);return wa(a).done(this.onAjaxLoad,this)},onAjaxLoad:function(a){fa(this.node,this.cfg.cls.loading);this.setContent(a,"ajax")},onImageLoad:function(){this.images--;this.onContentChange()},onContentChange:function(){this.visible&&this.reposition()},changeDynamicContent:function(){var a=this.cfg;a.content.fn?this.setContent(a.content.fn.call(this.$$callbackContext,this)):a.content.attr&&this.readContent()},toggleTitleAttribute:function(a){var b=
this.getTarget(),d;b&&(!1===a?(P(b,"tmp-title",E(b,"title")),b.removeAttribute("title")):(d=P(b,"tmp-title"))&&b.setAttribute("title",d))},getDialogSize:function(){this.rendered||this.render();var a=this.cfg,b=this.node,c=a.cls.hidden?na(b,a.cls.hidden):!(b&&!(0>=b.offsetWidth||0>=b.offsetHeight)),e=b.style.left;c&&(C(b,{left:"-1000px"}),b.style.display=a.show.display);a={width:ca(b),height:da(b)};c&&(C(b,{left:e}),b.style.display="none");return a},getTargetSize:function(){var a=this.getTarget();
return a?{width:ca(a),height:da(a)}:null},setFocus:function(){var a=this.cfg,b=a.show.focus,c=this.node,e;if(!0===b)if(b=u("input",c).concat(u("textarea",c)),0<b.length)b[0].focus();else{if(a.buttons)for(e in a.buttons){(a=u(a.buttons[e],c).shift())&&a.focus();break}}else(a=u(b,c).shift())&&a.focus()},getScrollEl:function(a){return!0===a||!1===a?window:"string"===typeof a?u(a).shift():a},animate:function(a,b){var c=this.cfg,d=this.node;var e=c[a].animate;v(e)&&(e=e(this,b));var f=e.skipDisplayChange||
!1;W(e)?e=a:w(e)&&(e=[e]);return ea(d,e,function(){if("show"===a&&!f){var b=new U;I(function(){d.style.display=c.show.display||"block";b.resolve()});return b}},!1)},removeElem:function(){var a=this,b=a.node;a.overlay.remove();b&&b.parentNode&&I(function(){a.visible||b.parentNode.removeChild(b)})},appendElem:function(){var a=this.cfg,b=window.document.body;b=a.render.appendTo||b;this.overlay.append();this.node&&!1!==a.render.appendTo&&b.appendChild(this.node)},destroyElem:function(){var a=this.node;
this.setHandlers("unbind","_self");this.bindSelfOnRender=!0;this.pointer.remove();this.overlay.remove();a&&(this.cfg.render.keepInDOM||a.parentNode&&a.parentNode.removeChild(a),this.node=null);this.trigger("lifetime",this)},destroy:function(){this.setHandlers("unbind");this.trigger("destroy",this);this.destroyElem();this.overlay&&this.overlay.$destroy();this.pointer&&this.pointer.$destroy();this.position&&this.position.$destroy()}},{defaults:null});return f}()});
